- name: Commit and push changes
  run: |
    git config user.name "GitHub Action Bot"
    git config user.email "action@github.com"
    
    # سحب آخر نسخة من الريبو وإعادة تهيئة البيئة المحلية
    git fetch origin
    git checkout main
    git reset --hard origin/main
    
    # إضافة الملف الجديد
    git add data/current_standings.json
    
    # commit لو في تغييرات
    git commit -m "Auto-update standings $(date +'%Y-%m-%d %H:%M')" || echo "No changes to commit"
    
    # push بقوة لكن بأمان (لو حد غيرك عمل push في نفس اللحظة، هيفشل بس مش هيضر)
    git push origin HEAD:main --force-with-lease || echo "Push failed - will retry next run"
