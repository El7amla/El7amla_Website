<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Fixtures – El7amla</title>
  <link rel="icon" href="./assets/favicon.ico">
  <link rel="stylesheet" href="./assets/site.css">
</head>
<body>
  <header>
    <div class="container" style="display:flex; align-items:center; justify-content:space-between; gap:16px;">
      <a href="./" style="display:flex; align-items:center; gap:10px; text-decoration:none;">
        <img src="./el7amla_logo.png" alt="El7amla" width="36" height="36" style="border-radius:12px; object-fit:cover;">
        <strong>El7amla League</strong>
      </a>
      <nav>
        <a href="./">Home</a>
        <a href="./fixtures.html" aria-current="page">Fixtures</a>
        <a href="./standings.html">Standings</a>
        <a href="./teams.html">Teams</a>
      </nav>
    </div>
  </header>

  <main>
    <h1>Fixtures</h1>
    <div id="fixturesWrap" class="card"></div>
    <p id="fixturesError" style="display:none;color:#b00020;margin-top:8px"></p>
  </main>

  <footer>
    <div class="container footer-inner">
      <span class="small">© <span id="year"></span> El7amla League</span>
      <a class="small" href="https://github.com/El7amla/El7amla_Website" target="_blank" rel="noreferrer">GitHub</a>
    </div>
  </footer>

  <script type="module">
  document.querySelector('#year').textContent = new Date().getFullYear();

  async function loadJSON(u){ const r=await fetch(u, { cache: "no-store" }); if(!r.ok) throw new Error(r.status); return r.json(); }
  function fmt(dt){ try{ return new Date(dt).toLocaleString(); }catch{ return dt; } }

  const wrap = document.getElementById('fixturesWrap');
  const err = document.getElementById('fixturesError');
  try{
    const fx = await loadJSON('./data/fixtures.json');
    if(fx.isBreak || !fx.matches?.length){
      wrap.innerHTML = `<p>No fixtures this gameweek. It’s a break.</p>`;
    }else{
      wrap.innerHTML = `
        <span class="badge">Gameweek ${fx.gameweek}</span>
        <table>
          <thead><tr><th>Home</th><th>Away</th><th>Kickoff</th><th>Score</th></tr></thead>
          <tbody>${fx.matches.map(m=>`<tr>
            <td>${m.home}</td><td>${m.away}</td><td>${fmt(m.kickoff || '')}</td><td>${m.score || '—'}</td>
          </tr>`).join('')}</tbody>
        </table>`;
    }
    err.style.display = 'none';
  }catch(e){
    console.error(e);
    err.textContent = 'Could not load fixtures. Check ./data/fixtures.json';
    err.style.display = 'block';
  }
  </script>
</body>
</html>
