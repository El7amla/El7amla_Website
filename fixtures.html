<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Fixtures - El7amla Fantasy League</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #1e1e2f, #232f4b);
      min-height: 100vh;
      color: white;
      overflow-x: hidden;
    }
    header {
      background-color: #111827;
      padding: 20px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.6);
      position: sticky;
      top: 0;
      z-index: 10;
    }
    header h1 {
      font-size: 22px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-family: 'Orbitron', sans-serif;
    }
    header img {
      height: 40px;
    }
    nav {
      display: flex;
      gap: 20px;
    }
    nav a {
      color: #93c5fd;
      text-decoration: none;
      font-weight: bold;
      position: relative;
    }
    nav a::after {
      content: "";
      position: absolute;
      width: 0%;
      height: 2px;
      background: #60a5fa;
      left: 0;
      bottom: -4px;
      transition: 0.3s ease;
    }
    nav a:hover::after {
      width: 100%;
    }
    .container {
      max-width: 1000px;
      margin: auto;
      padding: 60px 20px;
    }
    h2 {
      font-size: 26px;
      text-align: center;
      margin-bottom: 40px;
      color: #60a5fa;
    }
    .tabs {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 6px;
      margin-bottom: 25px;
    }
    .tab {
      background-color: #e0e0e0;
      border: none;
      padding: 10px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      color: #004e92;
      transition: background-color 0.3s, color 0.3s;
      user-select: none;
      min-width: 40px;
    }
    .tab:hover {
      background-color: #a3cef1;
    }
    .tab.active {
      background-color: #004e92;
      color: white;
      box-shadow: 0 4px 8px rgba(0, 78, 146, 0.7);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(4px);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 24px rgba(0,0,0,0.4);
    }
    th, td {
      padding: 16px;
      text-align: center;
    }
    th {
      background-color: #1e3a8a;
      color: #fff;
    }
    td {
      background-color: rgba(255,255,255,0.03);
      border-bottom: 1px solid rgba(255,255,255,0.08);
    }
    .no-fixtures, .break-message {
      margin-top: 20px;
      font-size: 18px;
      text-align: center;
      font-weight: bold;
    }
    .no-fixtures {
      color: #60a5fa;
    }
    .break-message {
      color: #e74c3c;
    }
    .footer-logo {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 50px;
      opacity: 0.85;
    }
    @media (max-width: 600px) {
      header h1 {
        font-size: 18px;
      }
      th, td {
        font-size: 14px;
        padding: 12px;
      }
      h2 {
        font-size: 20px;
      }
      .tab {
        font-size: 14px;
        padding: 8px 12px;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>
      <img src="el7amla_logo.png" alt="Logo">
      El7amla Fantasy League
    </h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="teams.html">Teams</a>
      <a href="standings.html">Standings</a>
      <a href="fixtures.html">Fixtures</a>
    </nav>
  </header>
  <div class="container">
    <h2>üìÖ Gameweek Fixtures</h2>
    <div class="tabs" id="gameweek-tabs"></div>
    <table id="fixtures-table" style="display:none;">
      <thead>
        <tr>
          <th>Team 1</th>
          <th>vs</th>
          <th>Team 2</th>
          <th>Score</th>
        </tr>
      </thead>
      <tbody id="fixtures-body"></tbody>
    </table>
    <div class="no-fixtures" id="no-fixtures" style="display:none;">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ŸÑŸáÿ∞Ÿá ÿßŸÑÿ¨ŸàŸÑÿ©.</div>
    <div class="break-message" id="break-message" style="display:none;">Ÿáÿ∞Ÿá ÿßŸÑÿ¨ŸàŸÑÿ© ÿπÿ®ÿßÿ±ÿ© ÿπŸÜ ÿßÿ≥ÿ™ÿ±ÿßÿ≠ÿ© (Break).</div>
  </div>
  <img src="premier_logo.png" class="footer-logo" alt="Premier League Logo" />

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const fixturesUrl = "https://el7amla-fpl-3107-2025.s3.us-east-1.amazonaws.com/fpl_data/fixtures.json";
      const tabsContainer = document.getElementById('gameweek-tabs');
      const fixturesTable = document.getElementById('fixtures-table');
      const fixturesBody = document.getElementById('fixtures-body');
      const noFixturesMessage = document.getElementById('no-fixtures');
      const breakMessage = document.getElementById('break-message');

      // ŸÅÿ≠ÿµ ÿßŸÑÿπŸÜÿßÿµÿ±
      if (!tabsContainer || !fixturesTable || !fixturesBody || !noFixturesMessage || !breakMessage) {
        console.error("ÿπŸÜÿµÿ± ÿ£Ÿà ÿ£ŸÉÿ´ÿ± ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ ŸÅŸä ÿßŸÑÿµŸÅÿ≠ÿ©");
        return;
      }

      let fixturesData = [];

      function renderTabs(data) {
        tabsContainer.innerHTML = '';
        const weeks = data.map(f => f.round);
        weeks.forEach(gw => {
          const tab = document.createElement('button');
          tab.classList.add('tab');
          tab.textContent = gw;
          tab.dataset.gameweek = gw;
          tabsContainer.appendChild(tab);
        });

        const firstTab = tabsContainer.querySelector('.tab');
        if (firstTab) {
          firstTab.classList.add('active');
          showFixtures(firstTab.dataset.gameweek);
        }
      }

      function showFixtures(gameweek) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelector(`.tab[data-gameweek="${gameweek}"]`).classList.add('active');

        fixturesBody.innerHTML = '';
        noFixturesMessage.style.display = 'none';
        breakMessage.style.display = 'none';
        fixturesTable.style.display = 'none';

        const fixtureRound = fixturesData.find(f => f.round == gameweek);
        if (!fixtureRound || !fixtureRound.matches) {
          noFixturesMessage.style.display = 'block';
          return;
        }

        fixtureRound.matches.forEach(match => {
          const row = document.createElement('tr');
          if (match.home === "BYE" || match.away === "BYE") {
            row.innerHTML = `<td colspan="4" style="color:#f39c12; font-weight:bold;">
              ${match.home === "BYE" ? match.away : match.home} ŸÑÿØŸäŸá ÿßÿ≥ÿ™ÿ±ÿßÿ≠ÿ© Ÿáÿ∞Ÿá ÿßŸÑÿ¨ŸàŸÑÿ©
            </td>`;
          } else {
            row.innerHTML = `
              <td>${match.home}</td>
              <td>vs</td>
              <td>${match.away}</td>
              <td>${match.scoreA || 0} - ${match.scoreB || 0}</td>
            `;
          }
          fixturesBody.appendChild(row);
        });

        fixturesTable.style.display = 'table';
      }

      tabsContainer.addEventListener('click', (e) => {
        if (e.target.classList.contains('tab')) {
          showFixtures(e.target.dataset.gameweek);
        }
      });

      fetch(fixturesUrl)
        .then(res => res.json())
        .then(data => {
          console.log("ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ¨ŸÑŸàÿ®ÿ©:", data);
          fixturesData = data.fixtures ? Object.keys(data.fixtures).map(round => ({
            round,
            matches: data.fixtures[round].map(([home, away]) => ({ home, away, scoreA: 0, scoreB: 0 }))
          })) : data;
          if (!fixturesData || fixturesData.length === 0) {
            console.error("ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ŸÖÿ®ÿßÿ±Ÿäÿßÿ™");
            noFixturesMessage.style.display = 'block';
            return;
          }
          renderTabs(fixturesData);
        })
        .catch(err => {
          console.error("ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™:", err);
          noFixturesMessage.style.display = 'block';
        });
    });
  </script>
</body>
</html>
